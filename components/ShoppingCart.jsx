import { useCart } from '../utils/CartContext';

const ShoppingCart = ({ className }) => {
  const { state, setCartOpen } = useCart();

  return (
    <span
      className={
        className + ' ' + 'relative scale-75 cursor-pointer mx-3 h-fit'
      }
    >
      <svg
        width="40"
        height="48"
        viewBox="0 0 40 48"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        onClick={() => setCartOpen(true)}
      >
        <path d="M32.3367 11.9935H30.1887V10.1343C30.1898 4.53836 25.6542 0.00103139 20.0582 1.75809e-07C14.4622 -0.00103104 9.92496 4.53452 9.92393 10.1305C9.92393 10.1317 9.92393 10.1331 9.92393 10.1343V11.9935H7.6697C4.53978 11.997 2.00337 14.5335 2 17.6634V36.7442C2.00703 42.9577 7.04234 47.993 13.2559 48H26.7506C32.964 47.993 37.9993 42.9577 38.0064 36.7442V17.6634C38.0029 14.5335 35.4666 11.997 32.3367 11.9935ZM13.2331 10.1343C13.2313 6.36586 16.2847 3.30953 20.053 3.30775C23.8215 3.30597 26.8778 6.35939 26.8796 10.1277C26.8796 10.1299 26.8796 10.1321 26.8796 10.1343V11.9935H13.2331V10.1343ZM34.6971 36.7443C34.6921 41.131 31.1373 44.686 26.7505 44.6909H13.2559C8.86909 44.686 5.31422 41.1311 5.30916 36.7443V17.6634C5.31075 16.3604 6.36662 15.3043 7.6697 15.3026H32.337C33.6401 15.3041 34.6961 16.3601 34.6975 17.6632L34.6971 36.7443Z" />
        <path d="M28.5342 18.043C27.6204 18.043 26.8796 18.7838 26.8796 19.6975V23.2116C26.8792 26.98 23.8238 30.0345 20.0554 30.0339C16.2878 30.0334 13.2336 26.9793 13.2331 23.2116V19.6975C13.2331 18.7838 12.4924 18.043 11.5786 18.043C10.6649 18.043 9.92407 18.7838 9.92407 19.6975V23.2116C9.9251 28.8076 14.4624 33.3432 20.0584 33.3421C25.6529 33.3411 30.1879 28.8061 30.1889 23.2116V19.6975C30.1887 18.7838 29.4479 18.043 28.5342 18.043Z" />
      </svg>

      {state.cart.length > 0 ? (
        <span className="bg-green text-sm rounded-full py-1 px-2 absolute -bottom-2 -left-2">
          {state.cart.reduce((acc, item) => acc + item.quantity, 0)}
        </span>
      ) : null}
    </span>
  );
};

export default ShoppingCart;
